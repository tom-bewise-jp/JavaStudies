# OCJP Silver SE11 第3章 演算子と判定構造

OCJP Silver SE11 第3章、演算子と判定構造の続き、if文とswitch文について考えていきます。

## 文について

ここでJavaの文につぃてこれまでのところをまとめておきたいと思います。

まず、式の最後にセミコロン「;」を配置したものが文になります。

例えば以下のようなものです。

```java
x = 3;
```

そして複数の文 (1個でも構わないのですが) を中括弧「{}」でくくったもの、これをブロックと言いますが、ブロックも1個の文として扱われます。

一応ブロックの例も示しておきます

```java
{
    x = 3;
    y = 5;
}
```

その他にも文はいろいろありますが、とりあえずここではif文とswitchぶんについて考えていきます。

## if文

if文は特定の条件が成立したとき、言い換えると条件式の評価結果がtrueとなるときに特定の文を実行することを示す文で、```if (条件式) 文```の形式を取ります。

以下に例を示します。

```java
if (x == 0) x = 3;
```

上の文は、*x*が*0*の場合に*x*に*3*を代入するという処理を表しています。

もちろん文としてブロックを使用することもできます。

```java
if (x == 0) {
    x = 3;
    y = 4;
}
```

この場合には*x*が*0*のときに中括弧「{}」でくくられたブロックが一括して処理されます。

条件が成立しなかった場合に別の処理を実行したい場合、**else**を使用して```if (条件式) 文 else 文```の形式を使用します。

```java
if (x == 0) x = 3; else y = x;
```

上のように1行書いても構わないのですが、**else**を見落とす恐れがあること、**else**の前のセミコロン「;」を忘れる可能性があることから、以下のような書き方が私はいいと思っています。

```java
if (x == 0)
    x = 3;
else
    y = x;
```

条件が成立した場合、成立しなかった場合に実行する文をインデント (字下げ) することで**if**と**else**の関係もわかりやすくなると思います。

if文、```if (条件式) 文```と```if (条件式) 文 else 文```はともに1個の文として扱われます。

さて、*x*が*0*のときは*x*を*1*に、*x*が*1*のときは*x*を*2*に、*x*が*2*のときは*x*を*3*に、それ以外の場合は*x*を*4*にするプログラムを考えてみます。

例えば下のように書いたとします。

```java
if (x == 0)
    x == 1;
if (x == 1)
    x == 2;
if (x == 2)
    x == 3;
else
    x == 4;
```

この書き方だと*x*が*0*の場合、2行目で*x*は*1*になりますが、3行目にある```x == 1```の条件が成立してしまうため、4行目で*x*は*2*になり、同様に5行目の```x == 2```も成立してしまうため、結果として*x*は*3*になってしまいます。

*x*が*0*だった場合には*x*を*1*としたあと、他のif文を実行しないよう**else**を使用して、以下のように書きます。

```java
if (x == 0)
    x == 1;
else
    if (x == 1)
        x == 2;
    else
        if (x == 2)
            x == 3;
        else
            x == 4;
```

ただ、この書き方だと段々と右によっていくため見にくくなってしまうので、以下のような書き方よくされます。

```java
if (x == 0)
    x == 1;
else if (x == 1)
    x == 2;
else if (x == 2)
    x == 3;
else
    x == 4;
```

構造を原理主義的に考えると少し気持ち悪い書き方となるのですが、同じレベルで判定がされているという感覚に近い書き方ですので、こちらの書き方を勧めます。

プログラム言語によってはこのような書き方のために専用のキーワード**ELSEIF**あるいは**ELIF**といったものを用意していますが、先程もちょっと触れたようにJavaではif文自体が1個の文として扱われるため、```else if```は特別なキーワードではなく、単に書き方を工夫しただけという扱いになります。

ところで、**else**の直後に**if**が置けるように、**if**の直後にも当然**if**を置くことができます。

```java
if (x == 0)
    if (y == 0)
        z = 0;
```

ただ、この場合は**else**の扱いが微妙になってきます。

2個のプログラム例を書いておきます。

```java
if (x == 0)
    if (y == 0)
        z = 0;
else
    z = 2;
```

```java
if (x == 0)
    if (y == 0)
        z = 0;
    else
        z = 2;
```

さて、上の2個のプログラム例の動作を考えてみましょう。

最初のものは*x*が*0*以外のときに*z*が*2*になるように感じられますが、次のものは*x*が*0*で*y*が*0*以外のときに*z*が*2*になるように見えます。

しかし、Javaはインデントを気にせず、連続する改行と空白文字を1個の空白文字と同等と認識するので、これらの式は同じ処理を実行します。

どうなるかは自分で調べていただくとして、ここで大事なのはこういった混乱のもとになるので、**if**の直後に**if**を置く場合は必ず中括弧「{}」を使用してブロックとするべきということです。

ブロックを使って書き直すと以下のようになります。

```java
if (x == 0) {
    if (y == 0)
        z = 0;
} else
    z = 2;
```

```java
if (x == 0) {
    if (y == 0)
        z = 0;
    else
        z = 2;
}
```

このように書くことで意図が明白になり、勘違いも起きなくなります。

原理主義的にif文の中はすべてブロックにするという書き方もありで、安全の面からは推奨されますが、私は上の例のように1行だけで済む短い代入文、またはメソッド呼び出し分の場合には改行後インデントして中括弧はなしという書き方をしています。

もちろん、組織として標準がある場合にはそれに従うのですけど。

